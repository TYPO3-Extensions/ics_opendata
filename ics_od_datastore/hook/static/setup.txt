plugin.tx_icstcafeadmin_pi1 {
	template = typo3conf/ext/ics_od_datastore/res/template_TCAFE_Admin.html
	table {
		showHidden = 0
	}
	renderConf {
		tx_icsoddatastore_licences.link.viewList {
			setContentToCurrent = 1
			typolink.parameter.current = 1
		}
		tx_icsoddatastore_licences.logo.viewList {
			setContentToCurrent = 1
			typolink.parameter.current = 1
		}
	}

	renderForm {
		tx_icsoddatastore_files.file.cObject = TEXT
		tx_icsoddatastore_files.file.cObject {
			cObject = CASE
			cObject {
				key.field = record_type
				1 = COA_INT
				1 {
					10 = TEXT
					10 {
						field = filemounts
						addParams.style = display: none
						addParams.id = tx_icsoddatastore_files_filemounts
					}
					20 = TEXT
					20 {
						field = file
						addParams.style = display: none
						addParams.id = tx_icsoddatastore_files_file
					}
				}
				default = COA_INT
				default {
					10 = TEXT
					10 {
						field = filemounts
						addParams.id = tx_icsoddatastore_files_filemounts
					}
					20 = TEXT
					20 {
						field = file
						addParams.id = tx_icsoddatastore_files_file
					}
				}
			}
		}
		tx_icsoddatastore_files.url.cObject = TEXT
		tx_icsoddatastore_files.url.cObject {
			cObject = CASE
			cObject {
				key.field = record_type
				1 = TEXT
				1 {
					field = url
					addParams.id = tx_icsoddatastore_files_url
				}
				default = TEXT
				default {
					field = url
					addParams.style = display: none
					addParams.id = tx_icsoddatastore_files_url
				}
			}
		}
		tx_icsoddatastore_files.record_type = TEXT
		tx_icsoddatastore_files.record_type {
			addParams.onchange = if(this.selectedIndex==0) { document.getElementById('tx_icsoddatastore_files_filemounts').style.display = 'block'; document.getElementById('tx_icsoddatastore_files_file').style.display = 'block'; document.getElementById('tx_icsoddatastore_files_url').style.display = 'none'; } else { document.getElementById('tx_icsoddatastore_files_filemounts').style.display = 'none'; document.getElementById('tx_icsoddatastore_files_file').style.display = 'none'; document.getElementById('tx_icsoddatastore_files_url').style.display = 'block';}
			addParams._offset = 4
 		}
	}
	
}

plugin.tx_icstcafeadmin_pi1.controlEntries.tx_icsoddatastore_files.file.eval = filemount

# TS configuration for tx_icsoddatastore_files list view call from tx_icsoddatastore_filegroups single view
tx_icsoddatastore_files.config.tx_icstcafeadmin_pi1 < plugin.tx_icstcafeadmin_pi1
tx_icsoddatastore_files.config.tx_icstcafeadmin_pi1 {
	tx_icsoddatastore_files_list.from_otherTableView = 1
	userFunc = tx_icstcafeadmin_pi1->user_TCAFEAdmin
	pidStorages = 
	view.modes = LIST
	table.tablename = tx_icsoddatastore_files

	listActions {		
		edit {
			cObject = TEXT
			cObject {
				data = LLL:EXT:ics_tcafe_admin/pi1/locallang.xml:action_edit
			}
			typolink {
				parameter.data = tsfe:id
				parameter.override.field = PIDeditItem
				additionalParams.cObject = COA
				additionalParams.cObject {
					10 = TEXT
					10.value = &tx_icstcafeadmin_pi1[mode]=EDIT&tx_icstcafeadmin_pi1[table]={field:table}&tx_icstcafeadmin_pi1[showUid]={field:id}
					20 = TEXT
					20 {
						if.isTrue.field = withDataEditItem
						value = &tx_icstcafeadmin_pi1[fields]=hidden,record_type,file,url,format,type,md5
					}
				}
				additionalParams.insertData = 1
			}
		}
		
		new {
			cObject = TEXT
			cObject {
				data = LLL:EXT:ics_tcafe_admin/pi1/locallang.xml:action_new
			}
			typolink {
				parameter.data = tsfe:id
				parameter.override.field = PIDnewItem
				additionalParams.cObject = COA
				additionalParams.cObject {
					10 = TEXT
					10.value = &tx_icstcafeadmin_pi1[mode]=NEW&tx_icstcafeadmin_pi1[table]={field:table}&tx_icstcafeadmin_pi1[newUid]={field:newId}
					20 = TEXT
					20 {
						if.isTrue.field = withDataNewItem
						value = &tx_icstcafeadmin_pi1[fields]=hidden,record_type,file,url,format,type,md5&tx_icstcafeadmin_pi1[dataset]={field:dataset}
					}
				}

				additionalParams.insertData = 1
			}
		}
	}	
}
